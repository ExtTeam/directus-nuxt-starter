# Проектная документация (README.md)

## Описание проекта

Этот проект представляет собой приложение, состоящее из различных сервисов, таких как Nuxt.js, Directus и MinIO, которые работают совместно и управляются с помощью Docker Compose. Основная цель проекта — обеспечить гибкое и масштабируемое веб-приложение для различных типов пользовательских интерфейсов и взаимодействий.

## Состав компонентов

- **Nuxt.js**: Используется для создания клиентской части приложения. Конфигурация для окружения задается в файле `.env.nuxt.sample`.
- **Directus**: Используется в качестве API и системы управления данными. Конфигурация среды задается в файле `.env.directus.sample`.
- **MinIO**: Обеспечивает хранение данных в объектном хранилище, конфигурация для него задается в файле `.env.minio.sample`.
- **Postgres**: Используется в качестве базы данных, конфигурация находится в `.env.postgres.sample`.

## Запуск проекта

Для развертывания и запуска всех компонентов необходимо использовать Docker Compose. Файлы `compose.yaml` и `compose.local.yaml` содержат необходимые конфигурации для запуска сервисов как в локальной среде, так и на продакшн-серверах.

### Предварительные требования

- Docker и Docker Compose должны быть установлены на вашем компьютере.
- Создайте `.env` файлы на основе предоставленных образцов, используя команды ниже:

  ```bash
  cp .env.sample .env
  cp .env.nuxt.sample .env.nuxt
  cp .env.directus.sample .env.directus
  cp .env.minio.sample .env.minio
  cp .env.postgres.sample .env.postgres
  ```

### Команды для запуска

Для запуска всех сервисов выполните следующую команду:

```bash
docker-compose -f compose.yaml -f compose.local.yaml up -d
```

Эта команда поднимет все необходимые контейнеры в фоновом режиме.

## Начало нового проекта

Чтобы использовать этот репозиторий как основу для нового проекта, выполните следующие шаги:

1. **Клонируйте репозиторий**:

   ```bash
   git clone <URL_репозитория>
   ```

2. **Инициализируйте субмодули** (если они используются):

   ```bash
   git submodule init
   git submodule update
   ```

3. **Создайте `.env` файлы** на основе предоставленных образцов:

   ```bash
   cp .env.sample .env
   cp .env.nuxt.sample .env.nuxt
   cp .env.directus.sample .env.directus
   cp .env.minio.sample .env.minio
   cp .env.postgres.sample .env.postgres
   ```

4. **Запустите Docker Compose** для запуска всех необходимых сервисов:

   ```bash
   docker-compose -f compose.yaml -f compose.local.yaml up -d
   ```

5. **Создайте новые репозитории**:
    - Так как текущий репозиторий выступает в роли стартового шаблона, вам необходимо создать собственные репозитории для каждого из компонентов.
    - Сначала создайте новые пустые репозитории на GitHub или другом сервисе контроля версий.

6. **Замените субмодули** на собственные репозитории**:
    - Удалите текущие субмодули и добавьте свои:

      ```bash
      rm -rf nuxt directus
      git submodule deinit -f nuxt directus
      git rm -f nuxt directus
      ```
    - Добавьте свои собственные репозитории в качестве субмодулей:

      ```bash
      git submodule add <URL_вашего_репозитория_nuxt> nuxt
      git submodule add <URL_вашего_репозитория_directus> directus
      ```
    - Убедитесь, что указываете правильную ветку (например, `main`):

      ```bash
      git config -f .gitmodules submodule.nuxt.branch main
      git config -f .gitmodules submodule.directus.branch main
      ```

7. **Начните разработку**:
    - Внесите изменения в код, добавьте новые страницы, компоненты или данные в Directus в соответствии с вашими требованиями.
    - Используйте `docker-compose` для управления окружением и тестирования ваших изменений.

## Настройка Git

В проекте используются Git-субмодули, которые необходимо инициализировать при клонировании репозитория. После клонирования выполните следующие команды:

```bash
git submodule init
git submodule update
```

Файл `.gitmodules` содержит информацию о подключенных субмодулях.

Кроме того, в проекте присутствует файл `.gitignore`, содержащий список файлов и директорий, которые не должны добавляться в репозиторий.

## Переменные окружения

Каждый из сервисов имеет свои конфигурационные файлы с переменными окружения:

- `.env.sample` — основной файл с переменными окружения для всего проекта.
- `.env.nuxt.sample` — конфигурация для клиента на базе Nuxt.js.
- `.env.directus.sample` — конфигурация для Directus.
- `.env.minio.sample` — настройки для MinIO.
- `.env.postgres.sample` — параметры для подключения к базе данных Postgres.

Все переменные окружения должны быть корректно настроены перед запуском проекта.

## Структура проекта

- `/pages/` — содержит страницы для приложения Nuxt.js.
- `/public/` — статические файлы.
- `/directus/` — настройки и файлы для Directus.
- `/minio/` — конфигурационные файлы для MinIO.